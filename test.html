<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Координатные Плоскости</title>
    <style>
        table {
            border-collapse: collapse;
            margin-top: 20px;
            margin-right: 20px;
            float: left;
        }
        td, th {
            border: 1px solid black;
            width: 30px;
            height: 30px;
            text-align: center;
        }
        th {
            background-color: #f0f0f0;
        }
        .axis {
            background-color: #e0e0e0;
        }
        .clear {
            clear: both;
        }
    </style>
</head>
<body>

<h1>Координатные Плоскости</h1>
<div id="coordinate-planes"></div>

<script>
function createMultipleTables(n, data) {
    const dimensions = data.length > 0 ? data[0].coords.length : 2; // Количество измерений
    const container = document.getElementById('coordinate-planes');

    // Получаем максимальные значения для всех координат кроме X и Y
    let maxCoords = Array(dimensions - 2).fill(0);

    // Определяем максимальные значения для каждой координаты после x и y
    data.forEach(item => {
        for (let i = 2; i < dimensions; i++) {
            maxCoords[i - 2] = Math.max(maxCoords[i - 2], item.coords[i]);
        }
    });

    // Для каждой комбинации координат за пределами x и y создаём отдельную таблицу
    const createTableForCoords = (remainingCoords, currentLevel = 0) => {
        if (currentLevel >= maxCoords.length) {
            // Создаем таблицу для фиксированного уровня координат
            const table = document.createElement('table');
            const caption = document.createElement('caption');
            caption.innerHTML = `( ${remainingCoords.map((val, index) => `${val}`).join(', ')} )`;
            table.appendChild(caption);
    
            for (let i = n; i >= 0; i--) {
                const row = document.createElement('tr');
    
                for (let j = 0; j <= n; j++) {
                    const cell = document.createElement(i === 0 || j === 0 ? 'th' : 'td');
    
                    if (i === 0 && j === 0) {
                        cell.innerHTML = ' ';
                    } else if (i === 0) {
                        // Ось x
                        cell.innerHTML = j - 1;
                        cell.classList.add('axis');
                    } else if (j === 0) {
                        // Ось y
                        cell.innerHTML = i - 1;
                        cell.classList.add('axis');
                    } else {
                        // Ищем объект с координатами x, y и фиксированными оставшимися координатами
                        const obj = data.find(item => {
                            const [x, y, ...rest] = item.coords;
                            return x === j - 1 && y === i - 1 && rest.every((coord, index) => coord === remainingCoords[index]);
                        });
                        cell.innerHTML = obj ? obj.number : '';
                    }
    
                    row.appendChild(cell);
                }
    
                table.appendChild(row);
            }

            container.appendChild(table);
        } else {
            // Рекурсивно создаём таблицы для всех значений текущей координаты
            for (let i = 0; i <= maxCoords[currentLevel]; i++) {
                createTableForCoords([...remainingCoords, i], currentLevel + 1);
            }
        }
    };

    // Запуск генерации таблиц для всех возможных комбинаций координат за пределами x и y
    createTableForCoords([], 0);
}

// Пример использования
const n = 5;
const data = [
    { coords: [1, 2, 1, 3], number: 10 },
    { coords: [3, 1, 0, 4], number: 20 },
    { coords: [4, 4, 0, 1], number: 30 },
    { coords: [0, 0, 3, 0], number: 5 },
    { coords: [2, 3, 4, 3], number: 15 }
];

createMultipleTables(n, data);
</script>

</body>
</html>
